var data = {list:[{
	displayOne:"block",
	displayTwo:"none",
	questions:[
		{id:1,title:"分析商品的供求状况"},{id:2,title:"拆装家里的小物件"},{id:3,title:"做听课笔记"},{id:4,title:"清点储存货物"},
		{id:5,title:"演奏乐器"}
		
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:6,title:"寻求不同现象间的内在联系"},{id:7,title:"知道从何种角度鉴赏室内装修设计"},
		{id:8,title:"探讨社会的起源"},{id:9,title:"设计贺卡"},{id:10,title:"按照说明书了解电子产品"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:11,title:"参加学术研讨会"},{id:12,title:"进行研究并撰写研究报告"},{id:13,title:"执行和推广社会福利政策"},
		{id:14,title:"向别人讲解规则或技能"},{id:15,title:"为书刊杂志插图"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:16,title:"加工金属零件"},{id:17,title:"将统计资料做成图表"},{id:18,title:"学习工程类制图"},
		{id:19,title:"清点班级作业的收交"},{id:20,title:"编辑报刊杂志"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:21,title:"阅读管理方面的书籍"},{id:22,title:"编写电脑程序"},{id:23,title:"勘探矿藏"},
		{id:24,title:"制定更为有效的管理制度"},{id:25,title:"按照装配说明书制作成品"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:26,title:"栽培花卉树木"},{id:27,title:"了解证券基础知识"},{id:28,title:"文字录入与排版"},
		{id:29,title:"进行雕塑创作"},{id:30,title:"陪伴照顾孤寡老人"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:31,title:"关注社会教育发展中的问题"},{id:32,title:"操作机械设备"},{id:33,title:"艺术表演"},
		{id:34,title:"诊断疾病或治疗损伤"},{id:35,title:"明确规划个人的发展方向"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:36,title:"担任少先队、团委的辅导员工作"},{id:37,title:"作词作曲"},
		{id:38,title:"管理档案或物品"},{id:39,title:"了解珍奇动植物的特征"},{id:40,title:"排除机械设备的故障"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:41,title:"对树木进行修剪与嫁接"},{id:42,title:"关注财经新闻"},{id:43,title:"自制小装置以便方便生活"},
		{id:44,title:"帮助残疾人掌握知识或技能"},{id:45,title:"在校内做产品促销"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:46,title:"文学创作"},{id:47,title:"了解网上售卖物品流程"},
		{id:48,title:"分析社会问题，探索产生原因"},{id:49,title:"解决人际纠纷"},{id:50,title:"比较、分析哲学命题"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:51,title:"进行成本核算和资金使用管理"},
		{id:52,title:"搜集整理图书资料"},{id:53,title:"气象分析及预报"},{id:54,title:"仔细核对计算类题目的正确性"},{id:55,title:"商品买卖业务"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:56,title:"核对自己钱款的使用状况"},{id:57,title:"检测电子仪器"},{id:58,title:"观测地形地貌"},
		{id:59,title:"关注湿地保护"},{id:60,title:"主动与他人交流或分享学习经验"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:61,title:"舞蹈演出"},{id:62,title:"维护、保养设备"},{id:63,title:"动物的科学饲养和良种繁殖"},
		{id:64,title:"维护公共秩序"},{id:65,title:"进行摄影创作"},
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:66,title:"做有风险的投资"},{id:67,title:"利用所学知识计算经营投资活动的收益"},{id:68,title:"了解人造卫星为什么不落地"},
		{id:69,title:"对权威的观点提出质疑"},{id:70,title:"协助街道或村镇开展活动"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:71,title:"在社区宣传安全、文明知识"},{id:72,title:"探索事物发展变化的规律"},{id:73,title:"广告策划与制作"},
		{id:74,title:"对问题提出多种假设"},{id:75,title:"对问题提出多种假设"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:76,title:"文字校对"},{id:77,title:"了解科学理论的原理"},{id:78,title:"了解某种动物的生活习性"},{id:79,title:"组织小型乐队表演"},
		{id:80,title:"学习化学反应原理"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:81,title:"做会议记录"},{id:82,title:"总结现有理论，提出新的观点"},{id:83,title:"修理机器"},
		{id:84,title:"服装设计"},{id:85,title:"倾听他人倾诉心理困扰并提供建议"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:86,title:"分拣信函、包裹"},{id:87,title:"生态农业作业"},{id:88,title:"学习商业经营状况统计方法"},
		{id:89,title:"解决电脑操作系统出现的小问题"},{id:90,title:"通过实验验证理论知识"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:91,title:"编制信息资料的分类目录"},{id:92,title:"驾驶机动车"},{id:93,title:"帮助走入歧途的人改过自新"},
		{id:94,title:"野外生态考察"},{id:95,title:"统筹调配人员和物资"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:96,title:"培育盆栽植物"},{id:97,title:"检索信息、图片"},{id:98,title:"进行复杂的数学推导"},
		{id:99,title:"自己动手做航模"},{id:100,title:"主持班会"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:101,title:"坚持学习一门乐器演奏"},{id:102,title:"参加音乐或美术赏析课"},{id:103,title:"修补朋友间破裂的关系"},
		{id:104,title:"搞小发明"},{id:105,title:"了解人体的解剖生理特点和各器官功能"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:106,title:"关注尖端科学的进展"},{id:107,title:"解决数理难题"},
		{id:108,title:"通过写作来抒发心情"},{id:109,title:"观察天文现象"},{id:110,title:"经常整理自己的书本和文具"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:111,title:"收集和制作生物标本"},{id:112,title:"为了帮助他人做出一些自我牺牲"},
		{id:113,title:"了解股票相关知识"},{id:114,title:"学会使用各种机械器材"},{id:115,title:"关心班费使用办法"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:116,title:"装配小电器"},{id:117,title:"通过阅读科普读物获得科学发展动态"},
		{id:118,title:"设计与绘制海报"},{id:119,title:"在课余时间定期参与志愿活动"},{id:120,title:"到野外考察动植物的生态特性"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:121,title:"阅读经济方面的书籍"},{id:122,title:"自己动手做小东西"},{id:123,title:"向低年级同学介绍学习经验"},
		{id:124,title:"整理文件和资料"},{id:125,title:"了解不同的动植物或矿石种类"}

	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:126,title:"有创意地为自己或朋友搭配服饰"},{id:127,title:"获取大量的科学知识"},{id:128,title:"参加学科知识竞赛"},
		{id:129,title:"给自己的图书分类、编号"},{id:130,title:"听植物学和动物学方面的讲座"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:131,title:"帮邻里照顾孩子、辅导学习"},{id:132,title:"习惯把自己的物品放在固定位置"},{id:133,title:"参加营销类的社会实践"},
		{id:134,title:"了解市场的运作体系"},{id:135,title:"主动帮助新同学熟悉环境"}
	]},
	{
		displayOne:"block",
		displayTwo:"none",
		questions:[
		{id:136,title:"定期整理通讯录"},{id:137,title:"练习书法、绘画"},{id:138,title:"整理信件、卡片"},
		{id:139,title:"修理自行车"},{id:140,title:"讨论财经方面的话题"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:141,title:"修理家中的小电器"},{id:142,title:"观察小动物，了解其生物习性"},{id:143,title:"学会作曲"},{id:144,title:"提前核对所需物品的准备情况"},
		{id:145,title:"拆卸、组装机器"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:146,title:"研究如何提高企业的知名度"},{id:147,title:"协助社区开展互助活动"},
		{id:148,title:"组装计算机"},{id:149,title:"设计、搭配服装"},{id:150,title:"使用精密仪器工作"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:151,title:"参加独唱或合唱演出"},{id:152,title:"设计新颖的广告词"},{id:153,title:"绘制图表以简明扼要地表示资料信息"},
		{id:154,title:"科学培育花卉树木"},{id:155,title:"制作航模"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:156,title:"参加学科竞赛并获奖"},{id:157,title:"校对文字和数据"},{id:158,title:"思考分析事物的发展变化过程"},{id:159,title:"电脑网络维护"},
		{id:160,title:"调解人际纠纷"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:161,title:"学习掌握贸易法规"},{id:162,title:"传授给他人自己总结或掌握的知识或技能"},{id:163,title:"分析某产品成功占有市场的原因"},
		{id:164,title:"组织学生参加夏令营活动"},{id:165,title:"领导并组织小组或社团活动"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:166,title:"制作动漫短片"},{id:167,title:"按照计划做事"},{id:168,title:"对课本中的实验进行改造"},
		{id:169,title:"策划新产品的推广活动"},{id:170,title:"思考分析某种科学理论"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:171,title:"修理家具"},{id:172,title:"修理简单电器"},{id:173,title:"设计表格准确记录各项收支情况"},
		{id:174,title:"做活动义务讲解员"},{id:175,title:"科学饲养动物"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:176,title:"参加模拟的投资游戏并获胜"},{id:177,title:"种植或培育盆栽"},
		{id:178,title:"快速掌握设备的操作"},{id:179,title:"改进机械装置"},{id:180,title:"分析、理解哲学问题"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:181,title:"养殖水产动物"},{id:182,title:"编制图书资料的分类目录"},
		{id:183,title:"缓解或真正解决他人心理困扰"},{id:184,title:"主动帮助陌生人了解新环境"},{id:185,title:"探求自然现象间的内在联系"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:186,title:"观察记录动植物的生态特性"},{id:187,title:"准确登记物品的使用情况"},
		{id:188,title:"组织慈善公益活动"},{id:189,title:"有创业的想法或点子"},{id:190,title:"了解青少年相关的法律知识，维护合法权益"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:191,title:"帮助同学提高学习成绩"},{id:192,title:"管理班级或实验室物品"},{id:193,title:"通过推理解决某些难题或事件"},
		{id:194,title:"对文件、资料进行汇总"},{id:195,title:"为书刊创作插图"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:196,title:"演奏乐器"},{id:197,title:"从事某产品的销售代理"},{id:198,title:"对事物提出新的看法和观点"},
		{id:199,title:"掌握社会问题的研究方法"},{id:200,title:"据图谱辨认动植物或矿石"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:201,title:"掌握人体解剖图"},{id:202,title:"制作生物标本"},{id:203,title:"分析商业经营状况"},
		{id:204,title:"钻研某学科的知识"},{id:205,title:"进行艺术摄影"}
	]},
	{
		displayOne:"none",
		displayTwo:"block",
		questions:[
		{id:206,title:"按照剧本扮演角色"},{id:207,title:"观察分析气象图"},
		{id:208,title:"编排舞蹈"},{id:209,title:"有清晰的个人规划"},{id:210,title:"认真整理归类各科学习笔记等资料"}
	]}
]};
function getCookie(name)
{
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
        if(arr=document.cookie.match(reg)) return unescape(arr[2]);
        else return null;
}

function setCookie(name,value)
{
    var Days = 1;
    var exp  = new Date();
        exp.setTime(exp.getTime() + Days*24*60*60*1000);
        document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
}
var min = 0;
var ckanswer="";

$(function(){
	var questionTpl = template("questionTpl",data);
	$("#questionList").html(questionTpl);
	$('.score').score();
	
	var vcount=0;
	if(getCookie("olduserid")){
		if(getCookie("userid")!=getCookie("olduserid")){
			setCookie("olduserid",getCookie("userid"));
			setCookie("testanswer","");
			return;
		}
	}else{
		setCookie("olduserid",getCookie("userid"));
		return;
	}

	var arr,reg=new RegExp("(^| )testanswer=([^;]*)(;|$)");
	
    if(arr=document.cookie.match(reg))
	{
		var testanswer=unescape(arr[2]);
		ckanswer = testanswer;
		answer=testanswer.split("");			
		var swiper = $(".swiper-slide");
	       for(i=0,j=0;i<swiper.length;i++){
			if(i<28){
				var activeScore = $(swiper[i]).find('.score-expression .default-statu');
			}else{
				var activeScore = $(swiper[i]).find('.score-star .default-statu');
			}
			activeScore.each(function(){
				if(answer[j]!=0){
					activeScores(this,answer[j]);
					// $(".answersNum").text(parseInt($(".answersNum").text())+1); 
				}
				j++;
			})
		}		
	}
})

// 测试快捷键shift+a
function KeyDown(evt){ 
	var e = evt   || window.event;
   if ((e.shiftKey)&&(e.keyCode==65)){
   		randomfun();
   		// $(".answersNum").text("210");
   }
}
document.onkeydown = KeyDown;
function randomfun(){
	var answerr=new Array();
	for(i=0;i<210;i++){
		var index = Math.floor(Math.random() * 6)+1; 
		answerr[i]=index;
	}
	var swiper = $(".swiper-slide");
	for(i=0,j=0;i<swiper.length;i++){
		if(i<28){
			var activeScore = $(swiper[i]).find('.score-expression .default-statu');
		}else{
			var activeScore = $(swiper[i]).find('.score-star .default-statu');
		}
		activeScore.each(function(){
			activeScores(this,answerr[j]);
			j++;
		})
	}
	ckanswer=answerr.join().replace(/(,)/g,"");
    setCookie("testanswer",ckanswer);
}

function activeScores(event,level){

	$(event).attr('active-level',level);
	var _index = $(event).parents("[class^='score-']").index() - 1;
	if($(event).attr("icon-type") == "score-expression"){
		$(event).parents("[class^='score-']").children('.score-description').html(LevelDescript(event,level,"expression"));
	}else{
		$(event).parents("[class^='score-']").children('.score-description').html(LevelDescript(event,level,"star"));
	}

	for(var q = 0 ; q<6 ; q++){
		if(q < level){
			$(event).parents("[class^='score-']").find('.default-icon').eq(q).css({
				"backgroundPositionX":-28 * (level-1)+3*(4-level)+2,
				"backgroundPositionY":-22 * _index
			});
		}else{
			$(event).parents("[class^='score-']").find('.default-icon').eq(q).css({"backgroundPositionX":"right"});
		}
	}
}

// 答案文字描述
function LevelDescript(event,n,str){
	var descriptHTML=$(event).parents("[class^='score-']").children('.score-description').html();
	if(str == "expression"){
		switch(parseInt(n))
		{
		case 1:
			descriptHTML = '非常不喜欢';
			break;
		case 2:
			descriptHTML = '不喜欢';	
			break;
		case 3:
			descriptHTML = '有点不喜欢';
			break;
		case 4:
			descriptHTML = '有点喜欢';
			break;
		case 5:
			descriptHTML = '喜欢';
			break;
		case 6:
			descriptHTML = '非常喜欢';
			break;
		default:
			descriptHTML = '';
		}
      }else{
		switch(parseInt(n))
		{
		case 1:
			descriptHTML = '完全没把握';
			break;
		case 2:
			descriptHTML = '比较没把握';
			break;
		case 3:
			descriptHTML = '有点没把握';
			break;
		case 4:
			descriptHTML = '有一点把握';
			break;
		case 5:
			descriptHTML = '比较有把握';
			break;
		case 6:
			descriptHTML = '完全有把握';
			break;
		default:
			descriptHTML = '';
		}
	}
	return descriptHTML;
}

// 上一页
function testPrev(){
	var swiper = $(".swiper-slide");
	for(i=0;i<swiper.length;i++){
		var swiperSlide = $(swiper[i]).attr("class");
		var regActive = new RegExp("swiper-slide-active");
		var regPrev = new RegExp("swiper-slide-prev");
		if(swiperSlide.match(regActive) != null && i == 0){
			$.alertable.alert("本页已经是第一页！");
		}else if(swiperSlide.match(regPrev) != null){
			mySwiper.slideTo(i, 500, false);
			$(".testPage").html(parseInt($(".testPage").html())-1);
			if(!$(".testSwiper input.btn").hasClass("testActive")){
				$(".testNext").removeClass("testActive");
				$(".testSwiper input.btn").addClass("testActive");
			}
			if(i == 27){
				$(".testFirst").removeClass("testActive");
				$(".testSecond").addClass("testActive");
			}
		}
	}
}

// 下一页
function testNext(){
	var swiper = $(".swiper-slide");
	for(i=0;i<swiper.length;i++){
		var swiperSlide = $(swiper[i]).attr("class");
		var regActive = new RegExp("swiper-slide-active");
		var regNext = new RegExp("swiper-slide-next");
		if(swiperSlide.match(regNext) != null){
			if(i<29)
				var activeScore = $('.swiper-slide-active .score-expression .default-statu');
			else
				var activeScore = $('.swiper-slide-active .score-star .default-statu');
			var levelArr = [];
			activeScore.each(function(){
				if($(this).attr("active-level") != 0){
					levelArr.push($(this).attr("active-level"));
				}
			})
			if(levelArr.length < 5) {
				$.alertable.alert("请答完本页所有题！");
				return 0;
			}else{
				mySwiper.slideTo(i, 500, false);
				if(i == 41){
					$(".testNext").addClass("testActive");
					$(".testSwiper input.btn").removeClass("testActive");
				}
				if(i == 28){
					$(".testFirst").addClass("testActive");
					$(".testSecond").removeClass("testActive");
				}
				$(".testPage").html(parseInt($(".testPage").html())+1);
				return 0;
			}
		}
	}
}

// 提交测试
function funSubmit(){
	var swiper = $(".swiper-slide");
	var levelArr = [];
	for(i=0;i<swiper.length;i++){
		if(i<28){
			var activeScore = $(swiper[i]).find('.score-expression .default-statu');
		}else{
			var activeScore = $(swiper[i]).find('.score-star .default-statu');
		}		
		activeScore.each(function(){
			if($(this).attr("active-level") !=0){
				levelArr.push(parseInt($(this).attr("active-level")));
			}
		})		
	}

	if(levelArr.length < 210) {
		$.alertable.alert("请答完所有的题再提交！");
	}else{
		$.alertable.alert("提交成功！").then(function() {
			// location.href="result.html";
		})
	}	
}

